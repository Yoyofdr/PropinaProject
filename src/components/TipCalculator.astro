import { useState } from 'react';
const { tipPercentages, translations } = Astro.props;
const serviceKeys = Object.keys(tipPercentages);
const [amount, setAmount] = useState(0);
const [service, setService] = useState(serviceKeys[0]);
const percent = tipPercentages[service]?.percent || 0;
const note = tipPercentages[service]?.note || '';
const tip = amount * percent / 100;
const total = Number(amount) + tip;

<div class="tip-calculator">
  <h2>{translations["tip_calculator"]}</h2>
  <form onSubmit={e => e.preventDefault()}>
    <label>{translations["amount"]}
      <input type="number" min="0" value={amount} onInput={e => setAmount(e.target.value)} />
    </label>
    <label>{translations["service_type"]}
      <select value={service} onInput={e => setService(e.target.value)}>
        {serviceKeys.map(key => (
          <option value={key}>{key}</option>
        ))}
      </select>
    </label>
    <div>
      <strong>{translations["typical_tip"]}:</strong> {percent}%
    </div>
    <div>
      <strong>{translations["total_with_tip"]}:</strong> {total.toFixed(2)}
    </div>
    {note && <div class="tip-note">{note}</div>}
  </form>
</div>
<style>
.tip-calculator { margin: 2em 0; padding: 1em; border: 1px solid #eee; border-radius: 8px; max-width: 400px; }
.tip-calculator input, .tip-calculator select { margin-left: 1em; }
.tip-note { margin-top: 1em; color: #555; font-size: 0.95em; }
</style>
